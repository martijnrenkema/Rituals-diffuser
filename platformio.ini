; PlatformIO Project Configuration File
; Rituals Perfume Genie 2.0 - Custom Firmware

[env:esp8266]
platform = espressif8266@4.2.1
board = esp_wroom_02
framework = arduino

; Libraries
lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/ESPAsyncTCP@^1.2.2
    fastled/FastLED@^3.6.0
    makuna/NeoPixelBus@^2.7.9
    miguelbalboa/MFRC522@^1.4.10

; LittleFS for web files (more efficient than SPIFFS)
board_build.filesystem = littlefs
board_build.ldscript = eagle.flash.2m128.ld

; Serial monitor
monitor_speed = 115200

; Upload settings - Serial (eerste keer)
upload_speed = 115200
; upload_port = /dev/cu.usbserial-0001

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; OTA environment (na eerste flash)
[env:esp8266_ota]
platform = espressif8266@4.2.1
board = esp_wroom_02
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/ESPAsyncTCP@^1.2.2
    fastled/FastLED@^3.6.0
    makuna/NeoPixelBus@^2.7.9
    miguelbalboa/MFRC522@^1.4.10

board_build.filesystem = littlefs
board_build.ldscript = eagle.flash.2m128.ld
monitor_speed = 115200

upload_protocol = espota
upload_port = rituals-diffuser.local
upload_flags =
    --auth=diffuser-ota

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; ===========================================
; ESP32 Environment (voor als ESP8266 kapot is)
; ===========================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0
    miguelbalboa/MFRC522@^1.4.10

; SPIFFS for web files
board_build.filesystem = spiffs
; Use min_spiffs partition: 1.9MB app, 190KB SPIFFS (default is 1.3MB app)
board_build.partitions = min_spiffs.csv

; Serial monitor
monitor_speed = 115200

; Upload settings
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; ESP32 OTA environment
[env:esp32_ota]
platform = espressif32
board = esp32dev
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0
    miguelbalboa/MFRC522@^1.4.10

board_build.filesystem = spiffs
; Use min_spiffs partition: 1.9MB app, 190KB SPIFFS
board_build.partitions = min_spiffs.csv
monitor_speed = 115200

upload_protocol = espota
upload_port = rituals-diffuser.local
upload_flags =
    --auth=diffuser-ota

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; ===========================================
; ESP32-C3 SuperMini Environment
; ===========================================
[env:esp32c3_supermini]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0
    miguelbalboa/MFRC522@^1.4.10

; SPIFFS for web files
board_build.filesystem = spiffs
board_build.partitions = min_spiffs.csv

; Serial monitor
monitor_speed = 115200

; Upload settings
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX
    -DESP32C3_SUPERMINI
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

; ===========================================
; ESP32-C3 SuperMini RC522 TEST Environment
; ===========================================
[env:esp32c3_rfid_test]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

; Only compile the RC522 test file
src_filter = +<rc522_test.cpp>

lib_deps =
    miguelbalboa/MFRC522@^1.4.10

; Serial monitor
monitor_speed = 115200

; Upload settings
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DESP32C3_SUPERMINI
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DRC522_TEST_MODE

; ===========================================
; ESP32-C3 SuperMini RC522 PIN SCANNER
; ===========================================
[env:esp32c3_rfid_scan]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

; Only compile the RC522 scan file
build_src_filter = +<rc522_scan.cpp>

lib_deps =
    miguelbalboa/MFRC522@^1.4.10

; Serial monitor
monitor_speed = 115200

; Upload settings
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DESP32C3_SUPERMINI
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DRC522_SCAN_MODE

; ESP32-C3 SuperMini OTA environment
[env:esp32c3_ota]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0

board_build.filesystem = spiffs
board_build.partitions = min_spiffs.csv
monitor_speed = 115200

upload_protocol = espota
upload_port = rituals-diffuser.local
upload_flags =
    --auth=diffuser-ota

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX
    -DESP32C3_SUPERMINI
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
