; PlatformIO Project Configuration File
; Rituals Perfume Genie 2.0 - Custom Firmware

[env:esp8266]
platform = espressif8266
board = esp_wroom_02
framework = arduino

; Libraries
lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/ESPAsyncTCP@^1.2.2
    fastled/FastLED@^3.6.0

; SPIFFS for web files
board_build.filesystem = spiffs
board_build.ldscript = eagle.flash.2m128.ld

; Serial monitor
monitor_speed = 115200

; Upload settings - Serial (eerste keer)
upload_speed = 115200
; upload_port = /dev/cu.usbserial-0001

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; OTA environment (na eerste flash)
[env:esp8266_ota]
platform = espressif8266
board = esp_wroom_02
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/ESPAsyncTCP@^1.2.2
    fastled/FastLED@^3.6.0

board_build.filesystem = spiffs
board_build.ldscript = eagle.flash.2m128.ld
monitor_speed = 115200

upload_protocol = espota
upload_port = rituals-diffuser.local
upload_flags =
    --auth=diffuser-ota

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; ===========================================
; ESP32 Environment (voor als ESP8266 kapot is)
; ===========================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0

; SPIFFS for web files
board_build.filesystem = spiffs
board_build.partitions = default.csv

; Serial monitor
monitor_speed = 115200

; Upload settings
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX

; ESP32 OTA environment
[env:esp32_ota]
platform = espressif32
board = esp32dev
framework = arduino

lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    fastled/FastLED@^3.6.0

board_build.filesystem = spiffs
board_build.partitions = default.csv
monitor_speed = 115200

upload_protocol = espota
upload_port = rituals-diffuser.local
upload_flags =
    --auth=diffuser-ota

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DASYNCWEBSERVER_REGEX
