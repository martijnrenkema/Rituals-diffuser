<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rituals Diffuser</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <header>
            <div class="logo">
                <svg viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M12 2C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2 15h-4v-1h4v1zm0-2h-4v-1h4v1zm-1.5-3.59V14h-1v-2.59L9.67 9.59l.71-.71L12 10.5l1.62-1.62.71.71-1.83 1.82z"/></svg>
                <span>Rituals Diffuser</span>
            </div>
            <div class="status">
                <span class="status-item"><span id="wifi-dot" class="dot"></span>WiFi</span>
                <span class="status-item"><span id="mqtt-dot" class="dot"></span>MQTT</span>
            </div>
        </header>

        <main>
            <section class="hero">
                <button id="power" class="power-btn">
                    <svg viewBox="0 0 24 24"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"/></svg>
                </button>
                <div class="speed-ring" id="speed-ring">
                    <svg viewBox="0 0 120 120">
                        <circle class="bg" cx="60" cy="60" r="54"/>
                        <circle class="progress" cx="60" cy="60" r="54" id="speed-circle"/>
                    </svg>
                    <div class="speed-text">
                        <span id="speed-val">50</span><small>%</small>
                    </div>
                </div>
                <input type="range" id="speed" min="0" max="100" value="50">
                <div class="rpm">RPM: <span id="rpm">0</span></div>
            </section>

            <section class="card">
                <h3>Timer</h3>
                <div class="timer-grid">
                    <button class="timer-btn" data-t="30">30m</button>
                    <button class="timer-btn" data-t="60">60m</button>
                    <button class="timer-btn" data-t="90">90m</button>
                    <button class="timer-btn" data-t="120">120m</button>
                    <button class="timer-btn active" data-t="0">âˆž</button>
                </div>
                <div class="remaining" id="remaining"></div>
            </section>

            <section class="card">
                <div class="row">
                    <h3>Interval Mode</h3>
                    <label class="switch"><input type="checkbox" id="interval"><span></span></label>
                </div>
                <div class="interval-cfg" id="interval-cfg">
                    <div class="field"><label>On</label><input type="number" id="int-on" min="10" max="120" step="5" value="30"><span>s</span></div>
                    <div class="field"><label>Off</label><input type="number" id="int-off" min="10" max="120" step="5" value="30"><span>s</span></div>
                    <button id="save-int" class="btn-sm">Save</button>
                </div>
            </section>

            <details class="card">
                <summary>WiFi Settings</summary>
                <form id="wifi-form">
                    <input type="text" id="w-ssid" placeholder="SSID" required>
                    <input type="password" id="w-pass" placeholder="Password">
                    <button type="submit" class="btn">Connect</button>
                </form>
                <div class="info">
                    <span>Network: <b id="cur-ssid">--</b></span>
                    <span>IP: <b id="cur-ip">--</b></span>
                </div>
            </details>

            <details class="card">
                <summary>MQTT Settings</summary>
                <form id="mqtt-form">
                    <div class="row-2">
                        <input type="text" id="m-host" placeholder="Host" required>
                        <input type="number" id="m-port" placeholder="Port" value="1883">
                    </div>
                    <input type="text" id="m-user" placeholder="Username">
                    <input type="password" id="m-pass" placeholder="Password">
                    <button type="submit" class="btn">Save</button>
                </form>
            </details>

            <details class="card">
                <summary>Cartridge <span id="rfid-dot" class="dot small"></span></summary>
                <div class="info">
                    <span>Scent: <b id="cartridge">--</b></span>
                    <span>Cartridge runtime: <b id="cart-runtime">--</b> hours</span>
                </div>
                <div class="row-2">
                    <button id="rfid-scan" class="btn">Scan RFID</button>
                    <button id="rfid-clear" class="btn-sm">Clear</button>
                </div>
                <small id="rfid-status" class="hint"></small>
            </details>

            <details class="card">
                <summary>Night Mode</summary>
                <div class="row">
                    <span>Enable night mode</span>
                    <label class="switch"><input type="checkbox" id="night-enable"><span></span></label>
                </div>
                <div id="night-cfg" class="night-cfg">
                    <div class="row-2">
                        <div class="field-group">
                            <label>Start (hour)</label>
                            <input type="number" id="night-start" min="0" max="23" value="22">
                        </div>
                        <div class="field-group">
                            <label>End (hour)</label>
                            <input type="number" id="night-end" min="0" max="23" value="7">
                        </div>
                    </div>
                    <div class="field-group">
                        <label>LED Brightness</label>
                        <input type="range" id="night-bright" min="0" max="100" value="10">
                        <span id="night-bright-val">10%</span>
                    </div>
                    <button id="save-night" class="btn">Save Night Mode</button>
                </div>
            </details>

            <details class="card">
                <summary>Statistics</summary>
                <div class="info">
                    <span>Total runtime: <b id="total-runtime">--</b> hours</span>
                    <span>Session: <b id="session-runtime">--</b> min</span>
                </div>
            </details>

            <details class="card">
                <summary>Security</summary>
                <form id="pass-form">
                    <div class="field-group">
                        <label>OTA Password <small id="ota-status"></small></label>
                        <input type="password" id="p-ota" placeholder="New OTA password (min 8 chars)">
                    </div>
                    <div class="field-group">
                        <label>WiFi AP Password <small id="ap-status"></small></label>
                        <input type="password" id="p-ap" placeholder="New AP password (min 8 chars)">
                    </div>
                    <button type="submit" class="btn">Save Passwords</button>
                    <small class="hint">Device restart required after changing passwords</small>
                </form>
            </details>

            <details class="card">
                <summary>System</summary>
                <div class="info">
                    <span>MAC: <b id="mac">--</b></span>
                    <span>Signal: <b id="rssi">--</b> dBm</span>
                </div>
                <button id="reset" class="btn danger">Factory Reset</button>
            </details>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
